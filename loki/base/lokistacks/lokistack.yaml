apiVersion: loki.grafana.com/v1beta1
kind: LokiStack
metadata:
  name: lokistack
  namespace: openshift-operators-redhat
spec:
  limits:
    global:
      ingestion:
        ingestionBurstSize: 10
        ingestionRate: 10
      retention:
        days: 90
        streams:
          - selector: >
              {log_type="audit"}
            priority: 200
            days: 90
          - selector: >
              {log_type="application"}
            priority: 100
            days: 30
          - selector: >
              {log_type="infrastructure"}
            priority: 100
            days: 30
  managementState: Managed
  storage:
    secret:
      name: thanos-object-storage
      type: s3
    tls:
      caName: lokistack-ca-bundle-custom
  template:
    compactor:
      replicas: 1
    distributor:
      replicas: 1
    gateway:
      replicas: 1
    indexGateway:
      replicas: 1
    ingester:
      replicas: 1
    querier:
      replicas: 1
    queryFrontend:
      replicas: 1
  tenants:
    mode: openshift-logging
  size: 1x.extra-small
  storageClassName: ocs-external-storagecluster-ceph-rbd
